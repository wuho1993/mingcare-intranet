<!DOCTYPE html>
<html>
<head>
  <title>Google Maps Test</title>
  <style>
    #map {
      height: 400px;
      width: 100%;
    }
    #status {
      padding: 20px;
      font-family: Arial, sans-serif;
    }
    .success { color: green; }
    .error { color: red; }
  </style>
</head>
<body>
  <h1>Google Maps 載入測試</h1>
  <div id="status">正在載入...</div>
  <div id="map"></div>

  <script>
    // 檢測 API 載入狀態
    window.gm_authFailure = function() {
      document.getElementById('status').innerHTML = '<span class="error">❌ API Key 驗證失敗！可能是：<br>1. API Key 無效<br>2. API Key 權限不足<br>3. 超過配額限制</span>';
    };

    function initMap() {
      try {
        const map = new google.maps.Map(document.getElementById('map'), {
          center: { lat: 22.3193, lng: 114.1694 },
          zoom: 14
        });
        document.getElementById('status').innerHTML = '<span class="success">✅ Google Maps 載入成功！</span>';
      } catch (error) {
        document.getElementById('status').innerHTML = '<span class="error">❌ 地圖初始化失敗：' + error.message + '</span>';
      }
    }

    // 檢測 script 載入錯誤
    window.addEventListener('error', function(e) {
      if (e.filename && e.filename.includes('maps.googleapis.com')) {
        document.getElementById('status').innerHTML = '<span class="error">❌ Google Maps Script 載入失敗！<br>錯誤：' + e.message + '</span>';
      }
    }, true);
  </script>

  <script 
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBFBLFI1GhfRuSwyZXO4-kS9YYg2eJ694I&libraries=places&callback=initMap"
    async
    defer>
  </script>
</body>
</html>
