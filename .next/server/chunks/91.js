"use strict";exports.id=91,exports.ids=[91],exports.modules={5662:(e,r,s)=>{s.d(r,{O:()=>i});let i=(0,s(6366).AY)("https://cvkxlvdicympakfecgvv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN2a3hsdmRpY3ltcGFrZmVjZ3Z2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE0MjkxODEsImV4cCI6MjA2NzAwNTE4MX0.jp2fPKcBcG4-042UoN3OieR553WAgABhJIujiDJAt-I")},2091:(e,r,s)=>{s.d(r,{e$:()=>o,eB:()=>t});var i=s(5662);async function t(e){try{if(!e.trim()||e.length<1)return{success:!0,data:[]};let[r,s]=await Promise.all([i.O.from("billing_salary_data").select("customer_name, customer_id, phone, service_address").or(`customer_name.ilike.%${e}%,customer_id.ilike.%${e}%,phone.ilike.%${e}%`).not("customer_name","is",null).not("customer_id","is",null).limit(20),i.O.from("customer_personal_data").select("customer_name, customer_id, phone, service_address").or(`customer_name.ilike.%${e}%,customer_id.ilike.%${e}%,phone.ilike.%${e}%`).not("customer_name","is",null).not("customer_id","is",null).limit(20)]);r.error&&console.error("計費記錄搜尋錯誤:",r.error),s.error&&console.error("客戶資料搜尋錯誤:",s.error);let t=[...r.data||[],...s.data||[]],o=new Map;t.forEach(e=>{if(e.customer_name&&e.customer_id){let r=e.customer_id;if(o.has(r)){let s=o.get(r);!s.service_address&&e.service_address&&(s.service_address=e.service_address)}else o.set(r,{customer_name:e.customer_name,customer_id:e.customer_id,phone:e.phone||"",service_address:e.service_address||"",display_text:`${e.customer_name} (${e.customer_id})${e.phone?" - "+e.phone:""}`})}});let c=Array.from(o.values()).sort((e,r)=>e.customer_name.localeCompare(r.customer_name)).slice(0,8);return{success:!0,data:c}}catch(e){return console.error("客戶搜尋失敗:",e),{success:!1,error:e instanceof Error?e.message:"客戶搜尋失敗"}}}async function o(e){try{if(!e.trim())return{success:!0,data:[]};let{data:r,error:s}=await i.O.from("care_staff_profiles").select(`
        staff_id, 
        name_chinese, 
        name_english,
        phone, 
        email,
        job_position,
        preferred_area,
        language
      `).or(`name_chinese.ilike.%${e}%,name_english.ilike.%${e}%,staff_id.ilike.%${e}%`).limit(8);if(s)throw s;return{success:!0,data:r||[]}}catch(e){return console.error("護理人員搜尋失敗:",e),{success:!1,error:e instanceof Error?e.message:"護理人員搜尋失敗"}}}}};