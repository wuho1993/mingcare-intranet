"use strict";(()=>{var e={};e.id=834,e.ids=[834],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2615:e=>{e.exports=require("http")},8791:e=>{e.exports=require("https")},8621:e=>{e.exports=require("punycode")},6162:e=>{e.exports=require("stream")},7360:e=>{e.exports=require("url")},1568:e=>{e.exports=require("zlib")},1965:(e,r,s)=>{s.r(r),s.d(r,{originalPathname:()=>g,patchFetch:()=>_,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>d,staticGenerationAsyncStorage:()=>m});var t={};s.r(t),s.d(t,{POST:()=>u});var a=s(9303),i=s(8716),n=s(670),o=s(7070),c=s(5662);async function u(e){try{let r=await e.json();console.log("API received data:",JSON.stringify(r,null,2));let{customer_id:s,care_staff_name:t,service_date:a,start_time:i,end_time:n,service_type:u,service_address:l,hourly_rate:p,service_fee:m,staff_salary:d,phone:g,customer_name:_,service_hours:f,hourly_salary:h,project_category:v,project_manager:y,date:x,staff_name:I,start_time1:j,end_time1:b,start_time2:A,end_time2:N}=r,O={service_date:a||x,care_staff_name:t||I,start_time:i||j,end_time:n||b,staff_salary:d,phone:g,customer_name:_,service_hours:f,hourly_salary:h||p,project_category:v,project_manager:y,customer_id:s,service_type:u,service_address:l,service_fee:m,hourly_rate:p};if(console.log("Final data after mapping:",JSON.stringify(O,null,2)),!O.service_date||!O.care_staff_name||!O.customer_name)return console.log("Missing required fields:",{service_date:O.service_date,care_staff_name:O.care_staff_name,customer_name:O.customer_name}),console.log("Source fields:",{service_date:a,care_staff_name:t,customer_name:_}),o.NextResponse.json({success:!1,error:"缺少必要欄位"},{status:400});let{data:q,error:J}=await c.O.from("billing_salary_data").insert(O).select();if(J)return console.error("Supabase error details:",{message:J.message,details:J.details,hint:J.hint,code:J.code,fullError:J}),o.NextResponse.json({success:!1,error:`資料庫錯誤: ${J.message}`},{status:500});return o.NextResponse.json({success:!0,data:q[0]})}catch(e){return console.error("API error:",e),o.NextResponse.json({success:!1,error:"伺服器錯誤"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/billing-salary-management/route",pathname:"/api/billing-salary-management",filename:"route",bundlePath:"app/api/billing-salary-management/route"},resolvedPagePath:"/Users/joecheung/Documents/GitHub/mingcare-intranet/app/api/billing-salary-management/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:d}=l,g="/api/billing-salary-management/route";function _(){return(0,n.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:m})}},5662:(e,r,s)=>{s.d(r,{O:()=>t});let t=(0,s(6366).AY)("https://cvkxlvdicympakfecgvv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN2a3hsdmRpY3ltcGFrZmVjZ3Z2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE0MjkxODEsImV4cCI6MjA2NzAwNTE4MX0.jp2fPKcBcG4-042UoN3OieR553WAgABhJIujiDJAt-I")}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[948,160],()=>s(1965));module.exports=t})();